{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 95b315c623156b6ce245","webpack:///./src/magic-rows.js"],"names":[],"mappings":"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","file":"magic-rows.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"magic-rows\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"magic-rows\"] = factory();\n\telse\n\t\troot[\"magic-rows\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 95b315c623156b6ce245\n **/","'use strict'\n\nclass MagicRows {\n  constructor (form) {\n    if (!form) return\n\n    this.rows = Array.from(form.querySelectorAll('input[type=\"text\"], input[type=\"mail\"]'))\n\n    this.maxRows = form.dataset.maxRows || 6\n    this.placeholderFormat = form.dataset.formatPlaceholder\n    this.idFormat = form.dataset.formatId\n    this.nameFormat = form.dataset.formatName\n\n    this.noRows = this.rows.length\n    this.lastRow = this.rows[this.noRows - 1]\n\n    this.addRow = this.addRow.bind(this)\n\n    this.addEventListeners()\n  }\n\n  addEventListeners () {\n    this.lastRow.addEventListener('focus', this.addRow)\n    this.lastRow.addEventListener('change', this.addRow)\n  }\n\n  removeEventListeners () {\n    this.lastRow.removeEventListener('focus', this.addRow)\n    this.lastRow.removeEventListener('change', this.addRow)\n  }\n\n  addRow () {\n    if (this.noRows >= this.maxRows) return\n    if (this.noRows > 1) {\n      if (!this.rows[this.noRows - 2].value) return\n    }\n\n    this.removeEventListeners()\n\n    this.noRows++\n\n    const cloneRow = this.cloneRow(this.lastRow)\n    const newRow = this.fillRow(cloneRow)\n\n    this.insertRow(this.lastRow, newRow)\n\n    this.lastRow = newRow\n    this.rows.push(this.lastRow)\n\n    this.addEventListeners()\n  }\n\n  cloneRow (row) {\n    const newRow = this.lastRow.cloneNode(true)\n    newRow.value = ''\n\n    return newRow\n  }\n\n  fillRow (row) {\n    const id = row.getAttribute('id')\n    const placeholder = row.getAttribute('placeholder')\n    const name = row.getAttribute('name')\n\n    if (id) row.setAttribute('id', this.getNextValue(id, this.idFormat))\n    if (placeholder) row.setAttribute('placeholder', this.getNextValue(placeholder, this.placeholderFormat))\n    if (name) row.setAttribute('name', this.getNextValue(name, this.nameFormat))\n\n    return row\n  }\n\n  insertRow (reference, node) {\n    reference.parentNode.insertBefore(node, reference.nextSibling)\n  }\n\n  getNextValue (value, format) {\n    if (format) {\n      return format.includes('$')\n        ? format.replace(/\\$+/g, this.getPatternNumbers(format, format.split('$').length - 1))\n        : format.includes('@')\n          ? format.replace('@', this.getLetter(this.guessNextPatternNumber()))\n          : this.guessNextValue(value)\n    } else {\n      return this.guessNextValue(value)\n    }\n  }\n\n  getPatternNumbers (format, noDigits) {\n    return (Array(noDigits).fill('0').join('') + this.guessNextPatternNumber()).slice(-noDigits)\n  }\n\n  guessNextPatternNumber () {\n    const likelyAttribute =\n      this.lastRow.getAttribute('id') ||\n      this.lastRow.getAttribute('name') ||\n      this.lastRow.getAttribute('placeholder')\n\n    const numberGuessed = Number(likelyAttribute.replace(/^\\D+/g, '')) + 1\n\n    return !numberGuessed ? this.noRows : numberGuessed\n  }\n\n  guessNextValue (value) {\n    const noDigits = value.replace(/^\\D+/g, '').length\n\n    return this.hasNumber(value)\n      ? value.replace(/\\d+/g, this.getPatternNumbers(value, noDigits))\n      : `${value}-${this.noRows}`\n  }\n\n  getLetter (number) {\n    return String.fromCharCode(96 + number).toUpperCase()\n  }\n\n  hasNumber (string) {\n    return /\\d/.test(string)\n  }\n}\n\nwindow.addEventListener('load', () => {\n  Array.from(document.querySelectorAll('[data-action=\"magic-rows\"]'))\n  .forEach(form => new MagicRows(form))\n})\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/magic-rows.js\n **/"],"sourceRoot":""}